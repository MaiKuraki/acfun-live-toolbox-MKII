# 风险 / 收益分析矩阵

## 维度与评估标准

- 指标：影响范围、实现复杂度、性能收益、维护收益、安全收益、回滚风险
- 评分：低/中/高（定性），备注列给出约束与依赖

## 条目

- 命名与职责收敛（连接池）
  - 影响：中；复杂度：中；性能：中；维护：高；安全：低；回滚：低
  - 备注：需调整导出与引用路径，配套文档更新与类型对齐

- 抽象 SSE/WS 基础设施
  - 影响：中；复杂度：中；性能：中；维护：高；安全：中；回滚：低
  - 备注：统一心跳与清理，减少泄漏与重复实现；需回归各通道

- SQLite WAL 与 PRAGMA 调优
  - 影响：中；复杂度：低；性能：高；维护：中；安全：低；回滚：低
  - 备注：对读并发与写延迟显著优化；需评估磁盘与平台兼容

- 日志分级与序列化最小化
  - 影响：低；复杂度：低；性能：中；维护：中；安全：中；回滚：低
  - 备注：开发/生产分级策略；避免在生产输出敏感信息

- 生产 CSP 最小化策略
  - 影响：中；复杂度：中；性能：低；维护：中；安全：高；回滚：中
  - 备注：需白名单审计与页面适配；对 overlay/插件页面进行验证

- RateLimit 持久化与白名单复核
  - 影响：低；复杂度：低；性能：低；维护：中；安全：中；回滚：低
  - 备注：可选增强；按插件与端点维度扩展

- engines.node 对齐 Electron Node
  - 影响：低；复杂度：低；性能：低；维护：中；安全：低；回滚：低
  - 备注：减少环境冲突；构建目标仍以 `vite.config.js:12` 为准

## 结论

- 优先落地：连接池命名与边界、SSE/WS 基础设施抽象、SQLite 调优
- 次优先：日志分级、生产 CSP 最小化策略
- 可选增强：限流持久化、根引擎约束对齐