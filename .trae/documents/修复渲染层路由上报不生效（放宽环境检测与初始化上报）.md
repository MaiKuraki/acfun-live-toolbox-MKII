## 问题定位
- 路由切换后只读仓库未出现 `ui.route*` 字段，说明渲染层未自动上报。
- 代码存在环境门限：`isElectronRenderer()` 要求 `(electronVersion 或 preloadApi)` 且 `(protocol=file: 或 UA 含 electron)`（packages/renderer/src/utils/readonlyReporter.ts:40–54）。当主窗以 `http:` 载入且 UA 未含 `Electron` 时，尽管有 `window.electronApi`，也会被错误判定为非渲染进程，导致上报被抑制。

## 修复方案
1) 放宽环境检测
- 修改 `isElectronRenderer()` 判定为：只要存在 `window.electronApi` 或 `process.versions.electron` 即认为是 Electron 渲染进程；不再依赖 `file:`/UA。
- 变更位置：packages/renderer/src/utils/readonlyReporter.ts:40–54。

2) 初始化一次路由上报
- 在应用挂载后主动上报当前路由，避免首次订阅时只有主题/侧边栏等字段。
- 变更位置：packages/renderer/src/main.ts（在 `app.mount('#app')` 后调用一次 `reportReadonlyUpdate({ ui: { routePath, pageName, pageTitle } })`）。

3) 保底直接 POST（可选）
- 在 `flush()` 里增加失败兜底：若环境检测失败或 `fetch` 抛错，仍直接尝试 POST 到 `/api/renderer/readonly-store`。
- 变更位置：packages/renderer/src/utils/readonlyReporter.ts:66–80。

4) 文档说明与编码提示（可选）
- 在 `API-Core-1.0.0.md` 增加“Windows 控制台 UTF-8”提示（SSE 输出中文避免乱码）。

## 验证
- 订阅：`curl.exe --no-buffer -H "Accept: text/event-stream" "http://127.0.0.1:18299/sse/renderer/readonly-store/subscribe?keys=ui"`
- 在主窗切换到“房间管理”等页面，观察到 `readonly-store-update` 的 `ui.routePath/pageName/pageTitle` 字段；并在统一流 `/sse/plugins/:pluginId/overlay` 看到 `event: ui` 的 `route-changed`。

## 影响面
- 不改变现有端点与事件结构，仅修正渲染层上报门限与增加初始化上报。旧逻辑不保留回退代码。