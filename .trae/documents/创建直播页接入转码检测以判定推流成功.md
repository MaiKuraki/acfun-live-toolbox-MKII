## 目标
- 在“创建直播”页获取到 `rtmpUrl`、`streamKey`、`streamName` 后，调用 acfunlive-http-api 的 `getTranscodeInfo(streamName)` 检测推流是否成功。
- 若返回存在转码信息（列表非空），则判定推流成功并允许开播；否则持续轮询直至成功或用户停止。

## 后端改动（packages/main/src/server/AcfunApiProxy.ts）
- 新增 Live 相关端点：`GET /api/acfun/live/transcode-info?streamName=...`
  - 校验 `streamName` 必填；为空返回 400。
  - 调用 `this.acfunApi.live.getTranscodeInfo(streamName)`（库已实现，见 packages/main/node_modules/acfunlive-http-api/dist/services/LiveService.js:827）。
  - 按库返回结构透传 `success/data/error/code`；当错误包含 `token/cookies` 关键字时返回 401，其余 400。
- 复用现有 token 校验逻辑（与 `stream-status` 相同风格）以减少无效请求。

## 前端改动（packages/renderer/src/pages/LiveCreatePage.vue）
- 获取 `streamName`
  - 优先使用接口返回的 `settingsResult.data.streamName`（见当前解析逻辑 `getStreamInfo`）。
  - 若仅有签名密钥（`splitPush.key`），则通过 `split('?')[0]` 去除查询字符串，得到裸 `streamName`。
- 新增轮询函数：`startTranscodeCheck(streamName: string)`
  - 每 3–5 秒调用 `GET /api/acfun/live/transcode-info`（通过 `window.electronApi.http.get` 传递 `streamName`）。
  - 当返回 `success && Array.isArray(data) && data.length > 0`：
    - 更新 `transcodeInfo` 列表用于右侧卡片展示
    - 将 `streamStatus` 置为 `'streaming'`
    - 允许开播（`canStartLive` 条件满足时按钮可用）
  - 当返回非空但长度为 0 或失败：
    - 将 `streamStatus` 置为 `'connecting'` 或 `'waiting'`（根据是否已开始推流可调整为 `'connecting'`）
    - 继续轮询，遇到认证错误（401 或错误包含 `token/cookies`）则停止轮询并提示登录
- 轮询管理
  - 复用/替换现有 `streamCheckTimer`：将其语义改为转码检测轮询；避免双轮询造成干扰。
  - 页面销毁时清理定时器（已有销毁钩子）。
- UI 状态
  - 保持现有右栏“推流状态/转码信息展示”卡片；当有转码信息时显示清单（质量、码率、分辨率等，库返回字段映射见 LiveService.js:888-898）。
  - `canStartLive` 逻辑：保留标题/分类/封面校验，且 `streamStatus === 'streaming'`。

## 错误与边界处理
- 无 `streamName`：提示“无法检测推流状态，请检查推流地址/密钥”，并不启动轮询。
- 认证缺失：若后端返回 401 或错误包含 `token/cookies`，立即停止轮询，提示登录。
- 网络异常：记录日志但不切换为 `'error'`，维持 `'connecting'` 并继续轮询。

## 代码定位参考
- 解析推流信息与 `splitRtmpUrlAndKey`：`packages/renderer/src/pages/LiveCreatePage.vue:556-563`、`883-913`
- 现有状态轮询入口：`packages/renderer/src/pages/LiveCreatePage.vue:607-661`
- 后端 Live 端点相邻位置（添加 `transcode-info` 的合适位置）：`packages/main/src/server/AcfunApiProxy.ts:498-516`
- 库方法签名与行为：`packages/main/node_modules/acfunlive-http-api/dist/services/LiveService.js:827-910`、`LiveService.d.ts:185`

## 交付与验证
- 静态代码走查与类型检查（不运行测试、不启动渲染进程 dev server）。
- 通过控制台日志确认：
  - 前端打印 `streamName` 与每次轮询结果长度
  - 后端命中 `transcode-info` 并返回成功/401/400 的区别
- 手动预期：推流启动后数秒内转码列表返回非空，UI状态切换为“推流成功”，按钮变为可点。